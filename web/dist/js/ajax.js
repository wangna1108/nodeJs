"use strict";function ajax(t){if(!t.url)throw new Error("url是必填选项");if(void 0!==t.type&&!/^(get|post)$/i.test(t.type))throw new Error("请求方式只接受GET或者POST,请期待更新");if(void 0!==t.async&&"boolean"!=typeof t.async)throw new Error("async需要传递一个布偶值");if(void 0!==t.data&&!/^(.+=.+&?)*$/.test(t.data)&&"[object Object]"!==Object.prototype.toString.call(t.data))throw new Error("data请传递一个合格的字符串或者对象");if(void 0!==t.dataType&&!/^(string|json)$/i.test(t.dataType))throw new Error("dataType 需要传递一个string或者json");if(void 0!==t.success&&"function"!=typeof t.success)throw new Error("success需要传递一个函数类型");var e={url:t.url,type:t.type||"GET",async:"boolean"!=typeof t.async||t.async,dataType:t.dataType||"string",data:t.data||"",success:t.success||function(){}};if("[object Object]"===Object.prototype.toString.call(t.data)){var a="";for(var s in t.data)a+=s+"="+t.data[s]+"&";e.data=a.slice(0,-1)}/^get$/i.test(e.type)&&(e.url=e.url+"?"+e.data);var o=new XMLHttpRequest;o.open(e.type,e.url,e.async),/^post$/i.test(e.type)?(o.setRequestHeader("content-type","application/x-www-form-urlencoded"),o.send(e.data)):o.send(),o.onload=function(){"string"===e.dataType&&e.success(o.responseText),"json"===e.dataType&&e.success(JSON.parse(o.responseText))}}